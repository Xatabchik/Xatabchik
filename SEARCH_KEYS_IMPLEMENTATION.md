# –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ–∏—Å–∫–∞ –∫–ª—é—á–µ–π –ø–æ key_email

## –û–±–∑–æ—Ä —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–∏—Å–∫–∞ –∫–ª—é—á–µ–π –ø–æ `key_email` —Å —Ä–∞–∑–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞:

- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏**: –ú–æ–≥—É—Ç –∏—Å–∫–∞—Ç—å —Å–≤–æ–∏ –∫–ª—é—á–∏ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —É –Ω–∏—Ö **–±–æ–ª—å—à–µ 10 –∫–ª—é—á–µ–π**
- **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã**: –ú–æ–≥—É—Ç –∏—Å–∫–∞—Ç—å –∫–ª—é—á–∏ –ª—é–±–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –¥–≤—É—Ö —Ä–µ–∂–∏–º–∞—Ö:
  1. –ü–æ–∏—Å–∫ –∫–ª—é—á–µ–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–≤ —Å–ø–∏—Å–∫–µ –∫–ª—é—á–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
  2. –ì–ª–æ–±–∞–ª—å–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ –≤—Å–µ–º –∫–ª—é—á–∞–º –≤ —Å–∏—Å—Ç–µ–º–µ

## –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### 1. `src/shop_bot/data_manager/database.py`

–î–æ–±–∞–≤–ª–µ–Ω—ã –¥–≤–µ –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ–∏—Å–∫–∞:

```python
def search_user_keys_by_email(user_id: int, search_query: str) -> list[dict]:
    """–ü–æ–∏—Å–∫ –∫–ª—é—á–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ key_email."""
    # –ò—â–µ—Ç –∫–ª—é—á–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ —á–∞—Å—Ç–∏—á–Ω–æ–º—É —Å–æ–≤–ø–∞–¥–µ–Ω–∏—é email

def search_all_keys_by_email(search_query: str) -> list[dict]:
    """–ü–æ–∏—Å–∫ –≤—Å–µ—Ö –∫–ª—é—á–µ–π (–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º) –ø–æ key_email."""
    # –ò—â–µ—Ç –≤—Å–µ –∫–ª—é—á–∏ –≤ —Å–∏—Å—Ç–µ–º–µ –ø–æ —á–∞—Å—Ç–∏—á–Ω–æ–º—É —Å–æ–≤–ø–∞–¥–µ–Ω–∏—é email
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç LIKE –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –≥–∏–±–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞ (—á–∞—Å—Ç–∏—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ)
- –ü–æ–∏—Å–∫ –ø–æ –ø–æ–ª—è–º `key_email` –∏ `email`
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –ø–æ –¥–∞—Ç–µ —Å–æ–∑–¥–∞–Ω–∏—è (–Ω–æ–≤—ã–µ –ø–µ—Ä–≤—ã–º–∏)
- –ó–∞—â–∏—Ç–∞ –æ—Ç –ø—É—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

### 2. `src/shop_bot/data_manager/remnawave_repository.py`

–î–æ–±–∞–≤–ª–µ–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏-–æ–±—ë—Ä—Ç–∫–∏ –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞:

```python
def search_user_keys_by_email(user_id: int, search_query: str) -> list[dict]:
    return database.search_user_keys_by_email(user_id, search_query)

def search_all_keys_by_email(search_query: str) -> list[dict]:
    return database.search_all_keys_by_email(search_query)
```

–§—É–Ω–∫—Ü–∏–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ `__all__` –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞.

### 3. `src/shop_bot/bot/keyboards.py`

**–û–±–Ω–æ–≤–ª–µ–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏:**

1. **`create_keys_management_keyboard()`**
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ "üîç –ù–∞–π—Ç–∏ –∫–ª—é—á" –µ—Å–ª–∏ –∫–ª—é—á–µ–π > 10
   - Callback: `search_my_keys`

2. **`create_admin_user_keys_keyboard()`**
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ "üîç –ù–∞–π—Ç–∏ –∫–ª—é—á" –µ—Å–ª–∏ –∫–ª—é—á–µ–π > 10
   - Callback: `admin_search_user_keys_{user_id}`

3. **`create_admin_keys_for_host_keyboard()`**
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ "üîç –ù–∞–π—Ç–∏ –∫–ª—é—á" –µ—Å–ª–∏ –∫–ª—é—á–µ–π > 10
   - Callback: `admin_search_all_keys`

**–ù–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**

```python
def create_search_keys_cancel_keyboard() -> InlineKeyboardMarkup:
    """–û—Ç–º–µ–Ω–∞ –ø–æ–∏—Å–∫–∞ –∫–ª—é—á–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""
    # –ö–Ω–æ–ø–∫–∞: "‚ùå –û—Ç–º–µ–Ω–∞"

def create_search_keys_results_keyboard(keys: list, page: int = 0) -> InlineKeyboardMarkup:
    """–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π"""
    # –ö–Ω–æ–ø–∫–∏ –¥–ª—è –∫–ª—é—á–µ–π –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –ø–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º

def create_admin_search_keys_cancel_keyboard() -> InlineKeyboardMarkup:
    """–û—Ç–º–µ–Ω–∞ –ø–æ–∏—Å–∫–∞ –∫–ª—é—á–µ–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º"""
    # –ö–Ω–æ–ø–∫–∞: "‚ùå –û—Ç–º–µ–Ω–∞"

def create_admin_search_keys_results_keyboard(keys: list, page: int = 0, user_id: int | None = None) -> InlineKeyboardMarkup:
    """–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ –¥–ª—è –∞–¥–º–∏–Ω–∞ —Å –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º –≤–æ–∑–≤—Ä–∞—Ç–æ–º –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é"""
    # –ö–Ω–æ–ø–∫–∏ –¥–ª—è –∫–ª—é—á–µ–π, –Ω–∞–≤–∏–≥–∞—Ü–∏—è –∏ –≤–æ–∑–≤—Ä–∞—Ç
```

### 4. `src/shop_bot/bot/handlers.py`

**–ù–æ–≤—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:**

1. **`search_my_keys_handler`**
   - –¢—Ä–∏–≥–≥–µ—Ä: callback `search_my_keys`
   - –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ `search_keys_state`
   - –ü—Ä–æ—Å–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤–≤–µ—Å—Ç–∏ email –¥–ª—è –ø–æ–∏—Å–∫–∞

2. **`search_keys_input_handler`**
   - –¢—Ä–∏–≥–≥–µ—Ä: —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ `search_keys_state`
   - –í—ã–∑—ã–≤–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é –ø–æ–∏—Å–∫–∞
   - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ FSMContext
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π

3. **`search_keys_page_handler`**
   - –¢—Ä–∏–≥–≥–µ—Ä: callback `search_keys_page_{N}`
   - –û–±–Ω–æ–≤–ª—è–µ—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –ø–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

4. **`cancel_search_keys_handler`**
   - –¢—Ä–∏–≥–≥–µ—Ä: callback `cancel_search_keys`
   - –û—Ç–º–µ–Ω—è–µ—Ç –ø–æ–∏—Å–∫ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫ —Å–ø–∏—Å–∫—É –∫–ª—é—á–µ–π

### 5. `src/shop_bot/bot/admin_handlers.py`

**–ù–æ–≤—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤:**

1. **`admin_search_user_keys_handler`**
   - –¢—Ä–∏–≥–≥–µ—Ä: callback `admin_search_user_keys_{user_id}`
   - –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ `admin_search_user_keys_state`
   - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç `user_id` –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

2. **`admin_search_user_keys_input_handler`**
   - –¢—Ä–∏–≥–≥–µ—Ä: —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ `admin_search_user_keys_state`
   - –ò—â–µ—Ç –∫–ª—é—á–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

3. **`admin_search_keys_page_handler`**
   - –¢—Ä–∏–≥–≥–µ—Ä: callback `admin_search_keys_page_{N}`
   - –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞

4. **`admin_search_all_keys_handler`**
   - –¢—Ä–∏–≥–≥–µ—Ä: callback `admin_search_all_keys`
   - –ó–∞–ø—É—Å–∫–∞–µ—Ç –≥–ª–æ–±–∞–ª—å–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ –≤—Å–µ–º –∫–ª—é—á–∞–º

5. **`admin_search_all_keys_input_handler`**
   - –¢—Ä–∏–≥–≥–µ—Ä: —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ `admin_search_all_keys_state`
   - –ò—â–µ—Ç –∫–ª—é—á–∏ –≤–æ –≤—Å–µ–π —Å–∏—Å—Ç–µ–º–µ

6. **`admin_cancel_search_keys_handler`**
   - –¢—Ä–∏–≥–≥–µ—Ä: callback `admin_cancel_search_keys`
   - –û—Ç–º–µ–Ω—è–µ—Ç –ø–æ–∏—Å–∫

## –ü–æ—Ç–æ–∫ —Ä–∞–±–æ—Ç—ã

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç –Ω–∞ "–ú–æ–∏ –∫–ª—é—á–∏" (–µ—Å–ª–∏ –∫–ª—é—á–µ–π > 10, –ø–æ—è–≤–ª—è–µ—Ç—Å—è –∫–Ω–æ–ø–∫–∞ "üîç –ù–∞–π—Ç–∏ –∫–ª—é—á")
2. –í–≤–æ–¥–∏—Ç email –¥–ª—è –ø–æ–∏—Å–∫–∞
3. –í–∏–¥–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
4. –ú–æ–∂–µ—Ç –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ –Ω—É–∂–Ω—ã–π –∫–ª—é—á –∏–ª–∏ –æ—Ç–º–µ–Ω–∏—Ç—å –ø–æ–∏—Å–∫

### –î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (–ø–æ–∏—Å–∫ –∫–ª—é—á–µ–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è):
1. –ê–¥–º–∏–Ω –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ "–ö–ª—é—á–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"
2. –ï—Å–ª–∏ –∫–ª—é—á–µ–π > 10, –≤–∏–¥–∏—Ç –∫–Ω–æ–ø–∫—É "üîç –ù–∞–π—Ç–∏ –∫–ª—é—á"
3. –í–≤–æ–¥–∏—Ç email –¥–ª—è –ø–æ–∏—Å–∫–∞
4. –í–∏–¥–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –≤–µ—Ä–Ω—É—Ç—å—Å—è –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

### –î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (–≥–ª–æ–±–∞–ª—å–Ω—ã–π –ø–æ–∏—Å–∫):
1. –ê–¥–º–∏–Ω –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ "–ö–ª—é—á–∏ –Ω–∞ —Ö–æ—Å—Ç–µ"
2. –ï—Å–ª–∏ –∫–ª—é—á–µ–π > 10, –≤–∏–¥–∏—Ç –∫–Ω–æ–ø–∫—É "üîç –ù–∞–π—Ç–∏ –∫–ª—é—á"
3. –í–≤–æ–¥–∏—Ç email –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ –≤—Å–µ–º –∫–ª—é—á–∞–º
4. –í–∏–¥–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ –≤—Å–µ—Ö —Ö–æ—Å—Ç–æ–≤

## –°–æ—Å—Ç–æ—è–Ω–∏—è FSM

```
search_keys_state - –ø–æ–∏—Å–∫ –∫–ª—é—á–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
admin_search_user_keys_state - –ø–æ–∏—Å–∫ –∫–ª—é—á–µ–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∞–¥–º–∏–Ω)
admin_search_all_keys_state - –≥–ª–æ–±–∞–ª—å–Ω—ã–π –ø–æ–∏—Å–∫ –∫–ª—é—á–µ–π (–∞–¥–º–∏–Ω)
```

## –§—É–Ω–∫—Ü–∏–∏ –æ–±—Ä–∞—Ç–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤ (Callbacks)

| Callback | –û–±—Ä–∞–±–æ—Ç—á–∏–∫ | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|-----------|---------|
| `search_my_keys` | search_my_keys_handler | –ù–∞—á–∞–ª–æ –ø–æ–∏—Å–∫–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| `search_keys_page_{N}` | search_keys_page_handler | –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å) |
| `cancel_search_keys` | cancel_search_keys_handler | –û—Ç–º–µ–Ω–∞ –ø–æ–∏—Å–∫–∞ (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å) |
| `admin_search_user_keys_{user_id}` | admin_search_user_keys_handler | –ü–æ–∏—Å–∫ –∫–ª—é—á–µ–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| `admin_search_all_keys` | admin_search_all_keys_handler | –ì–ª–æ–±–∞–ª—å–Ω—ã–π –ø–æ–∏—Å–∫ –≤—Å–µ—Ö –∫–ª—é—á–µ–π |
| `admin_search_keys_page_{N}` | admin_search_keys_page_handler | –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º (–∞–¥–º–∏–Ω) |
| `admin_cancel_search_keys` | admin_cancel_search_keys_handler | –û—Ç–º–µ–Ω–∞ –ø–æ–∏—Å–∫–∞ (–∞–¥–º–∏–Ω) |

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –∏—Å–∫–∞—Ç—å —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –∫–ª—é—á–∏
- ‚úÖ –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è —á–µ—Ä–µ–∑ `is_admin()`
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç –ø—É—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è user_id –∏ –¥—Ä—É–≥–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

## –ü–∞–≥–∏–Ω–∞—Ü–∏—è

- –†–∞–∑–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã: 5 —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
- –ü–∞–≥–∏–Ω–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, —Ç–∞–∫ –∏ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ FSM –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –º–µ–∂–¥—É –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π

## –û—Ç–ª–∞–¥–∫–∞ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–§—É–Ω–∫—Ü–∏–∏ –≤ `database.py` –ª–æ–≥–∏—Ä—É—é—Ç –æ—à–∏–±–∫–∏ —á–µ—Ä–µ–∑ `logging.error()`:
- –û—à–∏–±–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –ë–î
- –ü–æ—Ç–µ—Ä—é —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø—Ä–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –ø–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º

## –ü—Ä–∏–º–µ—Ä—ã –ø–æ–∏—Å–∫–∞

**–¢–æ—á–Ω—ã–π email:**
- –í–≤–µ–¥–µ–Ω–æ: `user@example.com`
- –ù–∞–π–¥—ë—Ç: `user@example.com`

**–ß–∞—Å—Ç–∏—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ:**
- –í–≤–µ–¥–µ–Ω–æ: `user`
- –ù–∞–π–¥—ë—Ç: `user@example.com`, `user123@example.com`, `myuser@test.com`

**–ù–∞—á–∞–ª–æ email:**
- –í–≤–µ–¥–µ–Ω–æ: `user@`
- –ù–∞–π–¥—ë—Ç: –≤—Å–µ –∫–ª—é—á–∏ —Å email –Ω–∞—á–∏–Ω–∞—é—â–∏–º–∏—Å—è –Ω–∞ `user@`

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å 11+ –∫–ª—é—á–∞–º–∏
2. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∏—Å–∫ –ø–æ —á–∞—Å—Ç–∏ email
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–∞–≥–∏–Ω–∞—Ü–∏—é
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—Ç–º–µ–Ω—É –ø–æ–∏—Å–∫–∞
5. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∞–¥–º–∏–Ω-–≤–µ—Ä—Å–∏—é –Ω–∞ –≤—Å–µ—Ö —Ö–æ—Å—Ç–∞—Ö

## –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

1. –î–æ–±–∞–≤–∏—Ç—å –ø–æ–∏—Å–∫ –ø–æ –¥—Ä—É–≥–∏–º –ø–æ–ª—è–º (–∏–º—è —Ö–æ—Å—Ç–∞, –¥–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∏ —Ç.–¥.)
2. –î–æ–±–∞–≤–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã (–∞–∫—Ç–∏–≤–Ω—ã–µ/–Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–µ –∫–ª—é—á–∏)
3. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
4. –≠–∫—Å–ø–æ—Ä—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞
5. –ò—Å—Ç–æ—Ä–∏—è –ø–æ–∏—Å–∫–æ–≤
